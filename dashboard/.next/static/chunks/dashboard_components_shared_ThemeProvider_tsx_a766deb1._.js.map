{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yizun/Documents/own-project/bcd-assignment/dashboard/components/shared/ThemeProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\n\r\ntype Theme = 'dark' | 'light' | 'system';\r\n\r\ntype ThemeProviderProps = {\r\n  children: React.ReactNode;\r\n  defaultTheme?: Theme;\r\n  storageKey?: string;\r\n};\r\n\r\ntype ThemeProviderState = {\r\n  theme: Theme;\r\n  setTheme: (theme: Theme) => void;\r\n};\r\n\r\nconst initialState: ThemeProviderState = {\r\n  theme: 'system',\r\n  setTheme: () => null,\r\n};\r\n\r\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme = 'system',\r\n  storageKey = 'blocksecure-ui-theme',\r\n  ...props\r\n}: ThemeProviderProps) {\r\n  const [theme, setTheme] = useState<Theme>(defaultTheme);\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  // Set mounted to true after component mounts (client-side only)\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    // Read theme from localStorage after mounting\r\n    const storedTheme = localStorage?.getItem(storageKey) as Theme;\r\n    if (storedTheme) {\r\n      setTheme(storedTheme);\r\n    }\r\n  }, [storageKey]);\r\n\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n\r\n    const root = window.document.documentElement;\r\n\r\n    root.classList.remove('light', 'dark');\r\n\r\n    if (theme === 'system') {\r\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)')\r\n        .matches\r\n        ? 'dark'\r\n        : 'light';\r\n\r\n      root.classList.add(systemTheme);\r\n      return;\r\n    }\r\n\r\n    root.classList.add(theme);\r\n  }, [theme, mounted]);\r\n\r\n  const value = {\r\n    theme,\r\n    setTheme: (theme: Theme) => {\r\n      if (typeof window !== 'undefined') {\r\n        localStorage?.setItem(storageKey, theme);\r\n      }\r\n      setTheme(theme);\r\n    },\r\n  };\r\n\r\n  return (\r\n    <ThemeProviderContext.Provider {...props} value={value}>\r\n      {children}\r\n    </ThemeProviderContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeProviderContext);\r\n\r\n  if (context === undefined)\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n\r\n  return context;\r\n};"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAiBA,MAAM,eAAmC;IACvC,OAAO;IACP,UAAU,IAAM;AAClB;AAEA,MAAM,qCAAuB,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAAsB;AAExD,SAAS,cAAc,EAC5B,QAAQ,EACR,eAAe,QAAQ,EACvB,aAAa,sBAAsB,EACnC,GAAG,OACgB;;IACnB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAS;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,gEAAgE;IAChE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,WAAW;YACX,8CAA8C;YAC9C,MAAM,cAAc,cAAc,QAAQ;YAC1C,IAAI,aAAa;gBACf,SAAS;YACX;QACF;kCAAG;QAAC;KAAW;IAEf,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,CAAC,SAAS;YAEd,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;YAE5C,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;YAE/B,IAAI,UAAU,UAAU;gBACtB,MAAM,cAAc,OAAO,UAAU,CAAC,gCACnC,OAAO,GACN,SACA;gBAEJ,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB;YACF;YAEA,KAAK,SAAS,CAAC,GAAG,CAAC;QACrB;kCAAG;QAAC;QAAO;KAAQ;IAEnB,MAAM,QAAQ;QACZ;QACA,UAAU,CAAC;YACT,wCAAmC;gBACjC,cAAc,QAAQ,YAAY;YACpC;YACA,SAAS;QACX;IACF;IAEA,qBACE,6LAAC,qBAAqB,QAAQ;QAAE,GAAG,KAAK;QAAE,OAAO;kBAC9C;;;;;;AAGP;GAtDgB;KAAA;AAwDT,MAAM,WAAW;;IACtB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAE3B,IAAI,YAAY,WACd,MAAM,IAAI,MAAM;IAElB,OAAO;AACT;IAPa","debugId":null}}]
}